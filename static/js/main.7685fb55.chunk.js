(this.webpackJsonpaviasale=this.webpackJsonpaviasale||[]).push([[0],{1:function(e,t,a){e.exports={SpinWrapper:"Spinner_SpinWrapper__3EnSs",spinner:"Spinner_spinner__27Q41",animate:"Spinner_animate__3d_M-",plane:"Spinner_plane__3nEtV",rotating:"Spinner_rotating__1DNqq",span1:"Spinner_span1__2SPYw",span2:"Spinner_span2__3e7XZ",span3:"Spinner_span3__2E3Le",span4:"Spinner_span4__bWvIY",span5:"Spinner_span5__3Y4m_",span6:"Spinner_span6__1gj08",span7:"Spinner_span7__3ApCH",span8:"Spinner_span8__1BQS6",span9:"Spinner_span9__1Rfdv",span10:"Spinner_span10__3xhpA",span11:"Spinner_span11__1dxHS",span12:"Spinner_span12__3lI_U",span13:"Spinner_span13__3K7Du",span14:"Spinner_span14__2c1w8",span15:"Spinner_span15__fmS-o",span16:"Spinner_span16__2hhwg",span17:"Spinner_span17__26zPk",span18:"Spinner_span18__2QU4W",span19:"Spinner_span19__A8wF5",span20:"Spinner_span20__1zPRa"}},10:function(e,t,a){e.exports={wrap:"App_wrap__3uDqX",logo:"App_logo__2xm-o","main-content":"App_main-content__2-vbf"}},16:function(e,t,a){e.exports={"filter-item":"FilterItem_filter-item__1myn7","check-box":"FilterItem_check-box__1ZlUt"}},17:function(e,t,a){e.exports={filters:"Filters_filters__2zrMs","filters-title":"Filters_filters-title__-QYF8"}},18:function(e,t,a){e.exports={button:"Button_button__3W43C",active:"Button_active__v-q_Q"}},19:function(e,t,a){e.exports={"tickets-list":"TicketsList_tickets-list__2_usk",buttons:"TicketsList_buttons__1MSRg"}},31:function(e,t,a){e.exports={wrapper:"EmptyList_wrapper___sAYJ"}},32:function(e,t,a){e.exports={logo:"Lodo_logo__qC2A9"}},34:function(e,t,a){e.exports=a(63)},4:function(e,t,a){e.exports={"ticket-item":"TicketItem_ticket-item__8gAnc",direction:"TicketItem_direction__3_KRA",route:"TicketItem_route__3uKir",length:"TicketItem_length__3OSsb",stops:"TicketItem_stops__1D6_j","company-logo":"TicketItem_company-logo__2lR0d",price:"TicketItem_price__1PTeX"}},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),i=a(6),l=a(5),o=a(30),u=a(2),p={filtersData:[{id:1,name:"\u0412\u0441\u0435",checked:!1},{id:2,name:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",stops:0,checked:!1},{id:3,name:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",stops:1,checked:!1},{id:4,name:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",stops:2,checked:!1},{id:5,name:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",stops:3,checked:!1}],activeFilters:[],ticketsData:[],buttons:[{name:"cheap",value:"\u0441\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",active:!0},{name:"fast",value:"\u0441\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439",active:!1}],sort:"cheap",searchId:"",loading:!1,error:null,stor:!1,currentPage:1,ticketsPerPage:5};var m=Object(i.c)({aviasales:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VALIDATE_CHECKBOX":return Object(u.a)(Object(u.a)({},e),{},{filtersData:t.data,activeFilters:t.activeFilters,currentPage:1});case"SEARCH_ID_LOADED":return Object(u.a)(Object(u.a)({},e),{},{searchId:t.searchId,loading:!0});case"TICKETS_LOADED":return Object(u.a)(Object(u.a)({},e),{},{ticketsData:t.ticketsData,loading:!t.stop});case"CHANGE_ACTIVE_BUTTON":return Object(u.a)(Object(u.a)({},e),{},{buttons:t.buttons,sort:t.sort,currentPage:1});case"PAGINATE":return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.page});case"START_BUTTON_CLICK":return Object(u.a)(Object(u.a)({},e),{},{currentPage:1});case"END_BUTTON_CLICK":return Object(u.a)(Object(u.a)({},e),{},{currentPage:t.lastPage});default:return e}}}),_=a(8),f=a.n(_),d=a(14),v=a(33),E=a(15),g=a.n(E);function k(e){return function(t,a){t(function(e,t){var a,n=function(t){var a=e.filter((function(e){return e.id===t}));return Object(v.a)(a,1)[0].checked},r=[];1===t?(a=!n(t),r=e.map((function(e){return e.checked=a,e}))):r=function(t,a){if(!0===t)return e.map((function(e){return 1!==e.id&&e.id!==a||(e.checked=!1),e}));var n,r=e.map((function(e){return e.id===a&&(e.checked=!0),e}));return(n=r,n.filter((function(e){return 1!==e.id})).map((function(e){return e.checked}))).every((function(e){return!0===e}))&&(r[0].checked=!0),r}(n(t),t);var c=r.filter((function(e,t){return e.checked&&0!==t})).map((function(e){return e.stops}));return{type:"VALIDATE_CHECKBOX",data:r,activeFilters:c}}(a().aviasales.filtersData,e))}}function h(e){return{type:"LOAD_ERROR",error:e}}function b(e){return{type:"SEARCH_ID_LOADED",searchId:e}}function N(){return function(e,t){var a=window.setInterval((function(){t().aviasales.loading?e(function(){var e=Object(d.a)(f.a.mark((function e(t,a){var n,r,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(a().aviasales.searchId));case 3:n=e.sent,r=n.data.tickets,c=a().aviasales.ticketsData.concat(r),s=n.data.stop,t({type:"TICKETS_LOADED",ticketsData:c,stop:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(h(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()):window.clearTimeout(a)}),500)}}var S=a(16),O=a.n(S),T=function(e){var t=e.name,a=e.id,n=e.checked,c=e.checkboxClick,s="check-box__".concat(a);return r.a.createElement("li",{className:O.a["filter-item"]},r.a.createElement("input",{className:O.a["check-box"],id:s,type:"checkbox",checked:n,onChange:function(){return c(a)}}),r.a.createElement("label",{htmlFor:s},r.a.createElement("span",null,t)))},C=a(17),P=a.n(C);var I=Object(l.b)((function(e){return{filtersData:e.aviasales.filtersData}}),(function(e){return{checkboxClick:function(t){return e(k(t))}}}))((function(e){var t=e.filtersData.map((function(t,a){return r.a.createElement(T,{name:t.name,checked:t.checked,id:t.id,key:a,checkboxClick:e.checkboxClick})}));return r.a.createElement("div",{className:P.a.filters},r.a.createElement("span",{className:P.a["filters-title"]},"\u041a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",null,t))})),D=a(18),w=a.n(D),A=function(e){var t=e.func,a=e.value,n=e.name,c=e.btnActiveClass,s=void 0!==c&&c,i=[w.a.button];return s&&i.push(w.a.active),r.a.createElement("button",{name:n,className:i.join(" "),onClick:function(){t(n)}},a)},j=a(31),x=a.n(j),y=function(){return r.a.createElement("div",{className:x.a.wrapper},r.a.createElement("h3",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))},L=a(7),B=a.n(L),F=function(e){var t=e.currentPage,a=e.ticketsPerPage,n=e.totalTickets,c=e.paginate,s=e.startButtonClick,i=e.endButtonClick,l=[],o=Math.ceil(n/a),u=!1,p=!1;return t<=3?(l=[1,2,3,4,5],u=!0):t>=o-2&&o>=5?(l=[o-4,o-3,o-2,o-1,o],p=!0):l=[t-2,t-1,t,t+1,t+2],r.a.createElement("div",{className:B.a.wrap},r.a.createElement("div",{className:B.a.fullTickets},r.a.createElement("span",null,"\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432: ",n)),r.a.createElement("ul",{className:B.a["pagination-list"]},r.a.createElement("li",null,r.a.createElement("button",{className:B.a["start-button"],disabled:u,onClick:function(){return s()}},"\u0412 \u043d\u0430\u0447\u0430\u043b\u043e")),l.map((function(e){var a=["".concat(B.a["pagination-item"])];return e===t&&a.push("".concat(B.a.active)),r.a.createElement("li",{key:e},r.a.createElement("button",{onClick:function(){return c(e)},className:a.join(" ")},e))})),r.a.createElement("li",null,r.a.createElement("button",{className:B.a["end-button"],disabled:p,onClick:function(){return i(o)}},"\u0412 \u043a\u043e\u043d\u0435\u0446 (",o,")"))))},R=a(4),K=a.n(R),U=function(e){var t=e.data,a="".concat(t.price," \u0420"),n=function(e){return t.segments[e].origin},c=function(e){return t.segments[e].destination},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Math.floor(e/60).toString(),r="";if(!0===a&&n>=24){var c=(n%24).toString();r=1===c.length?"0".concat(c):c}else r=1===n.length?"0".concat(n):n;var s=(e%60).toString(),i=1===s.length?"0".concat(s):s,l="short"===t?"".concat(r,":").concat(i):"".concat(r,"\u0447 ").concat(i,"\u043c");return l},i=function(e){var a=t.segments[e].duration;return s(a)},l=function(e){var a=new Date(t.segments[e].date.toString()),n=60*a.getHours()+a.getMinutes(),r=t.segments[e].duration;return"".concat(s(n,"short")," - ").concat(s(n+r,"short",!0))},o=function(e){var a="";switch(t.segments[e].stops.length){case 1:a="1 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430";break;case 2:a="2 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438";break;case 3:a="3 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438";break;default:a="\u0431\u0435\u0437 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043e\u043a"}return a},u=function(e){return t.segments[e].stops.join(", ")};return r.a.createElement("div",{className:K.a["ticket-item"]},r.a.createElement("div",{className:K.a.price},r.a.createElement("span",null,a),r.a.createElement("div",{className:K.a["company-logo"],style:{background:"url(https://pics.avs.io/99/36/".concat(t.carrier,".png) no-repeat")}})),r.a.createElement("div",{className:K.a.direction},r.a.createElement("div",{className:K.a.route},r.a.createElement("span",null,n(0)," - ",c(0)),r.a.createElement("span",null,l(0))),r.a.createElement("div",{className:K.a.length},r.a.createElement("span",null,"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,i(0))),r.a.createElement("div",{className:K.a.stops},r.a.createElement("span",null,o(0)),r.a.createElement("span",null,u(0)))),r.a.createElement("div",{className:K.a.direction},r.a.createElement("div",{className:K.a.route},r.a.createElement("span",null,n(1)," - ",c(1)),r.a.createElement("span",null,l(1))),r.a.createElement("div",{className:K.a.length},r.a.createElement("span",null,"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,i(1))),r.a.createElement("div",{className:K.a.stops},r.a.createElement("span",null,o(1)),r.a.createElement("span",null,u(1)))))},H=a(19),M=a.n(H);var X=Object(l.b)((function(e){return{ticketsData:e.aviasales.ticketsData,searchId:e.aviasales.searchId,activeFilters:e.aviasales.activeFilters,loading:e.aviasales.loading,buttons:e.aviasales.buttons,sort:e.aviasales.sort,currentPage:e.aviasales.currentPage,ticketsPerPage:e.aviasales.ticketsPerPage}}),(function(e){return{getSearchId:function(){return e(function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("https://front-test.beta.aviasales.ru/search");case 3:a=e.sent,n=a.data.searchId,t(b(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(h(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},buttonClick:function(t){return e(function(e){return function(t,a){t(function(e,t){return{type:"CHANGE_ACTIVE_BUTTON",buttons:e,sort:t}}(a().aviasales.buttons.map((function(t){return t.name===e?t.active=!0:t.active=!1,t})),e))}}(t))},loadingTicketsList:function(){return e(N())},paginate:function(t){return e(function(e){return{type:"PAGINATE",page:e}}(t))},startButtonClick:function(){return e({type:"START_BUTTON_CLICK"})},endButtonClick:function(t){return e(function(e){return{type:"END_BUTTON_CLICK",lastPage:e}}(t))}}}))((function(e){Object(n.useEffect)((function(){e.getSearchId()}),[]),Object(n.useEffect)((function(){e.searchId&&e.loadingTicketsList()}),[e.searchId]);var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cheap";function a(e,a){return"fast"===t?e.segments[0].duration-a.segments[0].duration:e.price-a.price}return e.sort(a)}(e.ticketsData.filter((function(t){for(var a=0;a<e.activeFilters.length;a++)if(e.activeFilters[a]===t.segments[0].stops.length)return!0})),e.sort).map((function(e,t){return r.a.createElement(U,{key:t,data:e})})),a=e.currentPage*e.ticketsPerPage,c=a-e.ticketsPerPage,s=t.slice(c,a),i=0===s.length?r.a.createElement(y,null):s,l=0===s.length?null:r.a.createElement(F,{ticketsPerPage:e.ticketsPerPage,currentPage:e.currentPage,totalTickets:t.length,paginate:e.paginate,startButtonClick:e.startButtonClick,endButtonClick:e.endButtonClick}),o=e.buttons.map((function(t,a){return r.a.createElement(A,{name:t.name,key:a,value:t.value,btnActiveClass:t.active,func:e.buttonClick})}));return r.a.createElement("div",{className:M.a["tickets-list"]},r.a.createElement("div",{className:M.a.buttons},o),r.a.createElement("div",null,i),l)})),V=a(10),q=a.n(V),Q=a(32),W=a.n(Q),Y=a(1),z=a.n(Y);function G(){return r.a.createElement("div",{className:z.a.SpinWrapper},r.a.createElement("div",{className:z.a.spinner},r.a.createElement("span",{className:z.a.span1}),r.a.createElement("span",{className:z.a.span2}),r.a.createElement("span",{className:z.a.span3}),r.a.createElement("span",{className:z.a.span4}),r.a.createElement("span",{className:z.a.span5}),r.a.createElement("span",{className:z.a.span6}),r.a.createElement("span",{className:z.a.span7}),r.a.createElement("span",{className:z.a.span8}),r.a.createElement("span",{className:z.a.span9}),r.a.createElement("span",{className:z.a.span10}),r.a.createElement("span",{className:z.a.span11}),r.a.createElement("span",{className:z.a.span12}),r.a.createElement("span",{className:z.a.span13}),r.a.createElement("span",{className:z.a.span14}),r.a.createElement("span",{className:z.a.span15}),r.a.createElement("span",{className:z.a.span16}),r.a.createElement("span",{className:z.a.span17}),r.a.createElement("span",{className:z.a.span18}),r.a.createElement("span",{className:z.a.span19}),r.a.createElement("span",{className:z.a.span20}),r.a.createElement("div",{className:z.a.plane})))}var J=Object(l.b)((function(e){return{loading:e.aviasales.loading}}))((function(e){var t=e.loading?r.a.createElement(G,null):null;return r.a.createElement("div",{className:W.a.logo},t)}));var Z=function(){return r.a.createElement("div",{className:q.a.wrap},r.a.createElement("div",{className:q.a.logo},r.a.createElement(J,null)),r.a.createElement("div",{className:q.a["main-content"]},r.a.createElement(I,null),r.a.createElement(X,null)))},$="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):i.d,ee=Object(i.e)(m,$(Object(i.a)((function(e){return function(t){return function(a){var n=t(a);return console.log("Middleware",e.getState()),n}}}),o.a))),te=r.a.createElement(l.a,{store:ee},r.a.createElement(Z,null));s.a.render(te,document.getElementById("root"))},7:function(e,t,a){e.exports={wrap:"Pagination_wrap__ysDCi",fullTickets:"Pagination_fullTickets__1q363","pagination-list":"Pagination_pagination-list__2Y9TO","start-ellipsis":"Pagination_start-ellipsis__1iC5D","end-ellipsis":"Pagination_end-ellipsis__1NQb_",active:"Pagination_active__3wjLA","pagination-item":"Pagination_pagination-item__2zxg_"}}},[[34,1,2]]]);
//# sourceMappingURL=main.7685fb55.chunk.js.map